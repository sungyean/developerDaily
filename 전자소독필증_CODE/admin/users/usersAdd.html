<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>거점소독시설 관리자 사이트</title>
	<link rel="stylesheet" href="../assets/css/common.css">
	<link rel="stylesheet" href="../assets/css/fonts.css">
	<link rel="stylesheet" href="../assets/css/jquery-ui.css">
	<link rel="stylesheet" href="../assets/css/jquery-ui-1.11.0.css">
	<link rel="stylesheet" href="../assets/css/style.css">
	<script type="text/javascript" src="../assets/js/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="../assets/js/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../assets/js/jquery.mCustomScrollbar.min.js"></script>
	<script type="text/javascript" src="../assets/js/custom.js"></script>
	<!--주소검색 API-->
	<script type="text/javascript" src="http://dmaps.daum.net/map_js_init/postcode.v2.js"></script>
	<!--JQUERY modal-->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script> -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
	<!-- 공통 script -->
	<script type="text/javascript" src="../../assets/js/comm.js"></script>
	<!-- validate Check -->
	<script type="text/javascript" src="../assets/js/jquery.validate.min.js"></script>
	<script type="text/javascript" src="../assets/js/additional-methods.min.js"></script>
	<script type="text/javascript" src="../assets/js/messages_ko.min.js"></script>
	<!-- smart popup -->
	<link rel="stylesheet" href="../assets/css/jquery.smartPop.css">
	<script type="text/javascript" src="../assets/js/jquery.smartPop.js"></script>

</head>
<body>
	<div class="header">
	
		<!-- TOP SECTION -->
		<div id="headers"></div>
		<!-- //TOP SECTION -->
		<!-- GNB SECTION -->
		<div id="gnb"></div>
		<!-- //GNB SECTION -->
		<!-- contents -->
		<div class="contents clearfix" id="contents">
			<div class="lnb-wrap">
				<h2 class="lnb-tit"><span>사용자 관리</span></h2>
				<ul class="lnb-menu">
					<li>
						<a href="usersList.html">사용자 현황</a>
						<ul>
							<li class="on"><a href="usersAdd.html">사용자 등록</a></li>
						</ul>
					</li>                 
				</ul>
			</div>
			<div class="contents-inn">
				<form id="saveUserInfo" method="POST">
				<h3 class="page-tit"><span>사용자 등록</span></h3>
					<div class="tb-wrap Add">
						<h4 class="tb-tit"><span class="icon-bullet"><img src="../assets/images/bullet1.png" alt="테이블 제목"></span>사용자 기본정보</h4>
						<table>                        
							<tbody>
								<tr>
									<th><span class="mark-essential">*</span>사용자 유형</th>
									<td class="condition-input-box">
										<select id="userType" name="userType" class="" onchange="userTypeOnchage();">                    
											<option value="" selected="">사용자 유형</option>                    
											<option value="STKRS_VHCLE_DRVER">축산차량 운전자</option>                 
											<option value="STKRS_FCLTY_CHARGER">시설 관리자</option>       
										</select>
									</td> 
									<th><span class="mark-essential">*</span>이름</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" id="name" name="name" placeholder="이름">
										</div>
									</td>
									<th><span class="mark-essential">*</span>연락처</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" id="moblphon" name="moblphon" placeholder="숫자만 입력해 주세요" onchange="onChangeCkPhone();">
											<button type="button" class="btn-td-search" onclick="moblphonCheck();">중복확인</button>
											<input type="hidden" id="moblphonCertifity">
										</div>
									</td>                    
								</tr>
								<tr>
									<th><span class="mark-essential">*</span>아이디</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" id="accountId" name="accountId" placeholder="아이디" onchange="onChangeIdCheck();">
											<button type="button" class="btn-td-search" onclick="idCheck();">중복확인</button>
											<input type="hidden" id="checkCertifity">
										</div>
									</td>
									<th><span class="mark-essential">*</span>비밀번호</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="password" name="passwd" id="passwd" placeholder="비밀번호">
										</div>
									</td>
									<th><span class="mark-essential">*</span>비밀번호 재입력</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="password" name="password_confirm" id="password_confirm" placeholder="비밀번호 재입력">
										</div>
									</td>      
								</tr>
								<tr>  
									<th><span class="mark-essential">*</span>이메일</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" id="email" name="email" placeholder="이메일주소">
										</div>
									</td>
									<th><span class="mark-essential">*</span>성별</th>
									<td class="condition-input-box">
										<label class="container radio">남자
											<input type="radio" checked="checked" name="sex" value="MALE">
											<span class="checkmark"></span>
										</label>                                      
										<label class="container radio">여자
											<input type="radio" name="sex" value="FEMALE">
											<span class="checkmark"></span>
										</label>
									</td>         
									<th><span class="mark-essential">*</span>사용자 상태</th>
									<td class="condition-input-box" colspan="3">
										<select id="isUsable" name="isUsable" class="">                    
											<option value="" selected="">사용자 상태</option>                    
											<option value="SBSCRB_COMPT">가입완료</option>                                     
											<option value="CONFM_REJECT">승인거절</option>
											<option value="CONFM_COMPT">승인완료</option>
										</select>
									</td> 
								</tr>
							</tbody>
						</table>
					</div> 
					<!-- 차량 운전자 등록 -->
					<div class="tb-wrap Add" id="car" style="display: none;">
						<div class="btn-add-wrap">
							<button type="button" id="carinfoButton" onclick="carInfoShow();" class="btn-add"><span class="icon-add"><img src="../assets/images/icon-add.png" alt="등록하기"></span>차량 추가 등록하기</button>
							<button type="button" id="carInfoDeleteButton" style="display: none;" onclick="carInfoDelete();" class="btn-add"><span class="icon-add"><img src="../assets/images/icon-minus.png" alt="등록하기"></span>차량  삭제</button>
						</div>
						
						<div id="car_div">
							<table>
								<h4 class="tb-tit" style="width: 200px;"><span class="icon-bullet"><img src="../assets/images/bullet1.png" alt="테이블 제목"></span>사용자 차량 정보1</h4>
								<tbody>
									<tr>
										<th><span class="mark-essential">*</span>차량번호</th>
										<td class="condition-input-box">
											<div class="search-box">
												<input type="text" id="carNo1" name="carNo1" placeholder="차량번호를 입력하세요." onchange="carNoChange(this);">
												<button type="button" class="btn-td-search" onclick="carCheck(this);">중복확인</button>
												<input type="hidden" id="carCertifity1">
												<input type="hidden"  name="carNum">
											</div>
										</td>
										<th><span class="mark-essential">*</span>차종명</th>
										<td class="condition-input-box">
											<input type="text" id="carTy1" name="carTy1" placeholder="차종명을 입력하세요.">
										</td>
										<th><span class="mark-essential">*</span>차량 유형</th>
										<td class="condition-input-box">
											<select id="carCl1" name="carCl1">
												<option value="" selected="">차량 분류</option>
												<option value="LVSTCK_CNVYNC">가축 운반차량</option>
												<option value="CDL_CNVYNC">원유 운반차량</option>
												<option value="EGG_CNVYNC">알 운반차량</option>
												<option value="ANIMAL_MEDCIN_CNVYNC">동물(의)약품 운반차량</option>
												<option value="FEED_CNVYNC">사료 운반차량</option>
												<option value="BIRD_FEED_CNVYNC">조사료 운반차량</option>
												<option value="LVSTCK_EXCRS_CNVYNC">가축분뇨 운반차량</option>
												<option value="RICE_CNVYNC">왕겨,쌀겨,톱밥운반차량</option>
												<option value="CPT_CNVYNC">퇴비 운반차량</option>
												<option value="CLNIC_VHCLE">진료 차량</option>
												<option value="PREVNT_INOCL_VHCLE">예방접종 차량</option>
												<option value="ARTIF_UPDT_VHCLE">인공수정 차량</option>
												<option value="CNSL_VHCLE">컨설팅 차량</option>
												<option value="FEED_PICK_VHCLE">사료채취 차량</option>
												<option value="DSNFC_VHCLE">방역 차량</option>
												<option value="MCHN_REPAIR_VHCLE">기계수리 차량</option>
												<option value="DFWS_SHIPMNT_VHCLE">가금출하 차량</option>
												<option value="DLVY_VHCLE">배송상하차 차량</option>
												<option value="HNF_TRNSP_VHCLE">인력수송 차량</option>
												<option value="GNRL_VHCLE">일반 차량</option>
												<option value="STKRS_VHCLE">축산 차량</option>
												<option value="ETC_VHCLE">기타 차량</option>
											</select>
										</td>                             
									</tr>
									<tr>
										<th><span class="mark-essential">*</span>최대 적재량</th>
										<td class="condition-input-box">
											<div class="search-box">
												<input type="text" id="mxmmLdadngQy1" name="mxmmLdadngQy1" placeholder="최대 적재량(톤)">
											</div>
										</td>
										<th>소유자 구분</th>
										<td class="condition-input-box">
											<div class="text-box">
												<select id="ownerSe1" name="ownerSe1">
													<option value="INDVDL">개인</option>
													<option value="INDVDL_BSNM">개인사업자</option>
													<option value="CPR">법인</option>
													<option value="ADMNSTMACH">행정기관</option>
													<option value="PBLGRP">공공단체</option>
													<option value="GNRL_GRP">일반단체</option>
													<option value="FRGNR">외국인</option>
												</select>
											</div>
										</td>
										<th>법인명</th>
										<td class="condition-input-box">
											<div class="text-box">
												<input type="text" id="cprNm1" name="cprNm1" placeholder="법인명">
											</div>
										</td>                            
									</tr>
									<tr>
										<th>사업자 등록번호</th>
										<td class="condition-input-box" colspan="5">
											<div class="search-box">
												<input type="text" id="bizrno1" name="bizrno1" placeholder="사업자등록번호">
											</div>
										</td>                          
									</tr>
								</tbody>
							</table>
						</div>
					</div>	
					<!-- 시설 관리자 등록 -->
					<div class="tb-wrap Add" id="facility" style="display:none;">
						<h4 class="tb-tit"><span class="icon-bullet"><img src="../assets/images/bullet1.png" alt="테이블 제목"></span>사용자 시설 정보</h4>
						<table>                        
							<tbody>
								<tr>
									<th><span class="mark-essential">*</span>시설 명</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" name="nm" id="nm" placeholder="시설명" onchange="FcltyOnChange();">
											<input type="hidden" name="farmNo"  id="farmNo" placeholder="시설 번호">
											<button type="button" class="btn-td-search" onclick="searchAccountPop();">검색</button>
										</div>
									</td>
									<th><span class="mark-essential">*</span>시설 지역</th>
									<td class="condition-input-box">
										<div class="text-box">
											<select  name="area" id="area"  class="">
												<option value="" selected="">지역선택</option>
												<option value="SU">서울</option>
												<option value="GG">경기</option>
												<option value="IC">인천</option>
												<option value="BS">부산</option>
												<option value="DG">대구</option>
												<option value="GJ">광주</option>
												<option value="DJ">대전</option>
												<option value="US">울산</option>
												<option value="SJ">세종</option>
												<option value="GW">강원</option>
												<option value="GN">경남</option>
												<option value="GB">경북</option>
												<option value="JN">전남</option>
												<option value="JNBK">전북</option>
												<option value="CHN">충남</option>
												<option value="CB">충북</option>
												<option value="JJ">제주</option>
											</select>
										</div>
									</td>
									<th><span class="mark-essential">*</span>시설 주소</th>
									<td class="condition-input-box">
										<div class="search-box">
											<input type="text" id="rnAdres1" name="rnAdres1" readonly>
											<button type="button" class="btn-td-search" onclick="adresOnClick();">검색</button>
											<input type="text" id="adres2" name="adres2" placeholder="시설 상세주소">
											<input type="hidden" name="lmnAdres1" id="lmnAdres1" placeholder="시설 우편주소">
											<input type="hidden" name="zip" id="zip"  placeholder="시설 우편주소">
											<input type="hidden" name="userSelectedType" id="userSelectedType" placeholder="도로명/지역 구분코드">
										</div>
									</td>                         
								</tr>
								<tr>
									<th><span class="mark-essential">*</span>시설코드</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" id="fcltyCode" name="fcltyCode"  placeholder="시설코드">
										</div>
									</td>
									<th><span class="mark-essential">*</span>시설 등록일</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" id="fcltyRegistde" name="fcltyRegistde" placeholder="시설 등록일">
										</div>
									</td>                            
									<th><span class="mark-essential">*</span>축종</th>
									<td class="condition-input-box">
										<div class="text-box">
											<select  id="ty" name="ty" class="">                    
												<option value="" selected="">축종 타입</option>                    
												<!-- <option value="DSNF_FCLTY">소독시설</option> -->
												<option value="LVSTCK_BRD_FCLTY">가축사육시설</option>
												<option value="SLAU_MLKC_PLACE">도축장 및 집유장</option>
												<option value="EDYG_COLCT_SLE_BSSH">식용란수집판매업소</option>
												<option value="FEED_FCTRY">사료공장</option>
												<option value="LVSTCK_MRKT">가축시장</option>
												<option value="LVSTCK_ATHRZ_INSTT">가축검정기관</option>
												<option value="SPCS_STKRS_PLACE">종축산장소</option>
												<option value="HATCHERY">부화장</option>
												<option value="FRTLZR_FCTRY">비료공장</option>
												<option value="LVSTCK_EXCRS_PROCESS_ENTRPS">가축분뇨처리업체</option>
												<option value="ETC">기타</option>
											</select>
										</div>
									</td>
								</tr>
								<tr>
									<th><span class="mark-essential">*</span>운영상태</th>
									<td class="condition-input-box">
										<div class="text-box">
											<select  name="status" id="status" class="">
												<option value="" selected="">운영상태</option>
												<option value="NRMLT">정상</option>
												<option value="WAIT">대기</option>
												<option value="EMGNC">비상</option>
												<option value="CLS">폐쇄</option>
											</select>
										</div>
									</td>                       
									<th><span class="mark-essential">*</span>소유주 명</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" id="ownerNm" name="ownerNm"  placeholder="소유주 명">
										</div>
									</td>
									<th><span class="mark-essential">*</span>소유주 주소</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" name="ownerAdres1" id="ownerAdres1"  placeholder="소유주 주소" readonly>
											<button type="button" class="btn-td-search" onclick="ownerAdresOnClick();">검색</button>
											<input type="text" name="ownerAdres2" id="ownerAdres2"  placeholder="소유주 상세주소">
											<input type="hidden" name="ownerZip" id="ownerZip" placeholder="소유주 우편번호">
										</div>
									</td> 
								</tr>
								<tr>
									<th><span class="mark-essential">*</span>소유주 연락처</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" id="ownerCttpc" name="ownerCttpc"  placeholder="소유주 연락처">
										</div>
									</td> 
									<th><span class="mark-essential">*</span>책임자 명</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" id="rspnberNm" name="rspnberNm"  placeholder="책임자 명">
										</div>
									</td>
									<th><span class="mark-essential">*</span>책임자 연락처</th>
									<td class="condition-input-box">
										<div class="text-box">
											<input type="text" id="rspnberCttpc" name="rspnberCttpc"  placeholder="책임자 연락처">
										</div>
									</td> 
								</tr>
								<tr>
									<th><span class="mark-essential">*</span>책임자 주소</th>
									<td class="condition-input-box" colspan="5">
										<div class="text-box">
											<input type="text" id="rspnberAdres1" name="rspnberAdres1"  placeholder="책임자 주소" readonly>
											<button type="button" class="btn-td-search" onclick="rspnberAddressOnclick();">검색</button>
											<input type="text" id="rspnberAdres2" name="rspnberAdres2"  placeholder="책임자 상세주소">
											<input type="hidden" id="rspnberZip" name="rspnberZip"  placeholder="책임자 우편번호">
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</div> 
					<div class="btn-tbView-box">
						<button class="btn-save" type="submit" onclick="submitFunction();"><span class="icon-save"><img src="../assets/images/icon-save.png" alt="저장"></span>저장</button>
						<button class="btn-list" type="button" onclick="menuListBack();"><span class="icon-list"><img src="../assets/images/icon-list.png" alt="목록"></span>목록</button>
						<!-- 로그인 ID -->
						<input type="hidden" id="registerId" name="registerId">
						<!-- 로그인 Token 값 -->
						<input type="hidden" id="accountToken" name="accountToken">
						<!-- 가입일 -->
						<!-- <input type="hidden" id="createdAt" name="createdAt"> -->
					</div>
				</form>               
			</div>
		</div>
		<!-- //contents -->
	</div>
	<!-- 주소검색 dialog div -->
	<div id="dsnfFcltyaAddr" style="width: 500px;"></div>
	<div id="adresOnAddr" style="width: 500px;"></div>
	<div id="ownerAdres" style="width: 500px;"></div>
	<div id="rspnberAddress" style="width: 500px;"></div>
</body>
</html>
<script type="text/javascript">
	$(document).ready(function() {
		$("#headers").load("../common/headers.html");
		$("#gnb").load("../common/gnb.html");
	});	
	//뒤로가기
	function menuListBack(){
		window.location.href="usersList.html";
	}
	function adresOnClick() {
		var element_wrap = document.getElementById("adresOnAddr");
		new daum.Postcode({
			oncomplete:function(data) {
				$('#rnAdres1').val(data.roadAddress);
				$('#lmnAdres1').val(data.jibunAddress);
				$("#zip").val(data.zonecode);
				$("#userSelectedType").val(data.userSelectedType);
				$("#adres2").focus();
			}
			, onclose:function(state) {
				$("#adresOnAddr").dialog("close");
			} 
		}).embed(element_wrap); 
		$("#adresOnAddr").dialog({
			autoOpen: true,
			width: "550px",
			modal: true,
			show:{
				effect: "build"
			}
		});
	}
	function ownerAdresOnClick(){
		var element_wrap = document.getElementById("ownerAdres");
		new daum.Postcode({
			oncomplete:function(data) {
                if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
					$('#ownerAdres1').val(data.roadAddress);
				} else { // 사용자가 지번 주소를 선택했을 경우(J)
					$('#ownerAdres1').val(data.jibunAddress);
				}
				$("#ownerZip").val(data.zonecode);
				$("#ownerAdres2").focus();
			}
			, onclose:function(state) {
				$("#ownerAdres").dialog("close");
			} 
		}).embed(element_wrap); 
		$("#ownerAdres").dialog({
			autoOpen: true,
			width: "550px",
			modal: true,
			show:{
				effect: "build"
			}
		});
	}
	function rspnberAddressOnclick(){
		var element_wrap = document.getElementById("rspnberAddress");
		new daum.Postcode({
			oncomplete:function(data) {
                if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
					$('#rspnberAdres1').val(data.roadAddress);
				} else { // 사용자가 지번 주소를 선택했을 경우(J)
					$('#rspnberAdres1').val(data.jibunAddress);
				}
				$("#rspnberZip").val(data.zonecode);
				$("#rspnberAdres2").focus();
			}
			, onclose:function(state) {
				$("#rspnberAddress").dialog("close");
			} 
		}).embed(element_wrap); 
		$("#rspnberAddress").dialog({
			autoOpen: true,
			width: "550px",
			modal: true,
			show:{
				effect: "build"
			}
		});
	}
	$(document).ready(function() {
		
	});
	//유형별 type
	function userTypeOnchage(){
		let userType = $('#userType').val();
		if(userType == 'STKRS_VHCLE_DRVER'){
			$('#car').show();
			$('#disInFection').hide();
			$('#facility').hide();
		}
		if(userType == 'STKRS_FCLTY_CHARGER'){
			$('#car').hide();
			$('#disInFection').hide();
			$('#facility').show();
		}
	}	
	//휴대폰 변경시 중복체크 
	function onChangeCkPhone(){
		$("#moblphonCertifity").val("");
	}
	//휴대폰 중복 check
	function moblphonCheck(){
		if($("#userType").val() == ""){
			alert("사용자 유형을 선택하세요.");
			return false;
		}
		if($("#moblphon").val() == ""){
			alert("휴대폰 번호를 입력하세요.");
			return false;
		}
		if (!/(0[0-9]{1}[0-9]{1})([0-9]{3,4})([0-9]{4})$/.test($('#moblphon').val())){
			alert("다음과 같은 형식으로만 작성해 주세요.<br> ex) 01012345678 ");
			return false;
		}
		//차량운전자 & 시설 관리자 일 경우
		$.ajax({
			url : global.apiUrl+"/pweBeaconUsers/countBy?&schColumns=beaconUserMbtlnum&schKeywords="+$("#moblphon").val()+"&columnTypes=STRING&columnFormats=&comparisonOperators=EQ&conditions=AND",
			type: "GET",
			cache: false,
			dataType: "json",
			success: function(data){
				if(data.page.totalElements >0){
					alert("중복된 휴대폰 번호 입니다.");
					return false;
				}else if(data.page.totalElements ==0){
					alert("사용 가능한 휴대폰 번호 입니다.");
					$("#moblphonCertifity").val("1");
				}
			}
		})
	}
	//아이디 변경시 중복체크
	function onChangeIdCheck(){
		if($("#checkCertifity").val()==1){
			$("#checkCertifity").val("");
		}
	}
	//아이디 중복 check
	function idCheck(){
		/*초기화*/
		$("#checkCertifity").val("");
		if($("#userType").val() == ""){
			alert("회원 유형을 반드시 선택하세요.");
			$("#userType").focus();
			return false;
		}
		if($("#accountId").val() == ""){
			alert("아이디를 반드시 입력하세요.");
			$("#accountId").focus();
			return false;
		}
		var regCheckID =/(?=.*\d)(?=.*[a-z]).{4,20}/
		if (!regCheckID.test($('#accountId').val())){
			alert("영문+숫자 조합(4자 이상 20자 이하로)작성해 주세요.");
			$("#accountId").focus();
			return false;
		}
		let form = {
			"accountId": $("#accountId").val(),
			"accountTy": $("#userType").val()
		}
		$.ajax({
			type: 'POST',
			url: global.apiUrl + "/members/dplctCnfirm",
			async: false,
			data: JSON.stringify(form),
			contentType: "application/json",
			dataType: 'json',
			success: function (res) {
				if (res == true) {
					alert("중복된 ID 입니다.")
					$("#accountId").focus();
					return false;
				} else if (res == false) {
					alert("사용 가능한 ID 입니다.")
					$("#checkCertifity").val("1");
				}
			},
			error: function (err) {
				alert("관리자에게 문의하세요.");
			}
		});
	}
	function submitFunction() {		
		if ($("#userType").val() == "STKRS_VHCLE_DRVER") {
			$("#saveUserInfo").validate({
				//validation이 끝난 이후의 submit 직전 추가 작업할 부분
				submitHandler: function (form, event) {
					event.preventDefault(); //form 의 submit 을 막고 ajax 로 동작하기 위한 구문
					if ($("#checkCertifity").val() == "") {
						alert("중복확인 후 회원가입 할 수 있습니다.");
						$("#accountId").focus();
						return false;
					}
					if ($("#moblphonCertifity").val() == "") {
						alert("휴대폰 중복확인 후 회원가입 할 수 있습니다.")
						return false;
					}
					
					var formData = {}
					formData.accountTy = $("#userType").val();
					formData.accountId = $("#accountId").val();
					formData.email = $("#email").val();
					formData.name = $("#name").val();
					formData.passwd = $("#passwd").val();
					formData.sexdstn = $("input[name=sex]:checked").val();
					formData.moblphon = $("#moblphon").val();
					formData.status = $("#isUsable").val();

					/* 차량운전자 일 경우 */
					let num = $("input[name='carNum']").length;

					let carArray = [];
					for (let i = 1; i <= num; i++) {
						if ($("#carCertifity"+i).val() == "") {
							alert("차량 중복체크는 필수 입니다.")
							return false;
						}
						carArray.push({
							"carNo" : $("#carNo"+i).val(),
							"carCl" : $("#carCl"+i).val(),
							"carTy" : $("#carTy"+i).val(),
							"mxmmLdadngQy" : $("#mxmmLdadngQy"+i).val(),
							"ownerSe" : $("#ownerSe"+i).val(),
							"cprNm" : $("#cprNm"+i).val(),
							"bizrno" : $("#bizrno"+i).val(),
							"registerId" : $("#accountId").html(),
						})	
					}

					formData.carList = carArray;
					
					console.log("formData", formData)
					if (confirm("회원 등록 하시겠습니까?")) {
						$.ajax({
							type: 'POST',
							url: global.apiUrl + "/members/join",
							async: false,
							data: JSON.stringify(formData),
							contentType: "application/json",
							dataType: 'json',
							success: function (res) {
								window.location.href="./usersList.html"
							},
							error: function (err) {
								alert("실패");
							}
						});
						return false;
					} else {
						return false;
					}
				},
				//규칙
				rules: {
					userType : {
						required: true
					},
					accountId : {
						required: true,
						accountIdCheck : true
					},
					passwd: {
						required: true,
						minlength: 8,
						maxlength: 20,
						passwordCk : true,
					},
					password_confirm: {
						required: true,
						minlength: 8,
						maxlength: 20,
						equalTo: "#passwd",
					},
					name: {
						required: true,
						//digits : true // 숫자만 입력
					},
					email: {
						required: true,
						minlength: 2,
						email: true
					},
					moblphon: {
						required: true,
						minlength: 11,
						maxlength: 20,
						number : true,
					},
					isUsable : {
						required : true
					},
					carNo1 : {
						required: true,
					},
					carTy1 : {
						required: true,
					},
					carCl1 : {
						required: true,
					},
					mxmmLdadngQy1 : {
						required: true,
					},
					ownerSe1 : {
						required: true,
					},
					cprNm1 : {
						required: true,
					},
					bizrno1 : {
						required: true,
						bizrnoCheck : true
					},
					carNo2 : {
						required: true,
					},
					carTy2 : {
						required: true,
					},
					carCl2 : {
						required: true,
					},
					mxmmLdadngQy2 : {
						required: true,
					},
					ownerSe2 : {
						required: true,
					},
					cprNm2 : {
						required: true,
					},
					bizrno2 : {
						required: true,
						bizrnoCheck : true
					},
					carNo3 : {
						required: true,
					},
					carTy3 : {
						required: true,
					},
					carCl3 : {
						required: true,
					},
					mxmmLdadngQy3 : {
						required: true,
					},
					ownerSe3 : {
						required: true,
					},
					cprNm3 : {
						required: true,
					},
					bizrno3 : {
						required: true,
						bizrnoCheck : true
					},
					carNo4 : {
						required: true,
					},
					carTy4 : {
						required: true,
					},
					carCl4 : {
						required: true,
					},
					mxmmLdadngQy4 : {
						required: true,
					},
					ownerSe4 : {
						required: true,
					},
					cprNm4 : {
						required: true,
					},
					bizrno4 : {
						required: true,
						bizrnoCheck : true
					},
					carNo5 : {
						required: true,
					},
					carTy5 : {
						required: true,
					},
					carCl5 : {
						required: true,
					},
					mxmmLdadngQy5 : {
						required: true,
					},
					ownerSe5 : {
						required: true,
					},
					cprNm5 : {
						required: true,
					},
					bizrno5 : {
						required: true,
						bizrnoCheck : true
					},
				},
				//규칙체크 실패시 출력될 메시지
				messages: {
					userType: {
						required: "필수로 입력하세요"
					},
					accountId : {
						required: "필수로 입력하세요",
						accountIdCheck : "영문+숫자 조합(4자 이상 20자 이하로)작성해 주세요."
					},
					passwd: {
						required: "필수로 입력하세요",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다",
						passwordCk : "비밀번호는 영문자,숫자,특수문자 조합을 입력해야 합니다."

					},
					password_confirm: {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다",
						equalTo: "비밀번호가 일치하지 않습니다.",
					},
					name: {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
					},
					email: {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						email: "이메일 형식에 맞지 않습니다."
					},
					moblphon: {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다",
						number : "숫자만 입력하세요."
					},
					isUsable : {
						required: "필수로 입력하세요."
					},
					carNo1 : {
						required: "필수로 입력하세요."
					},
					carTy1 : {
						required: "필수로 입력하세요."
					},
					carCl1 : {
						required: "필수로 입력하세요."
					},
					mxmmLdadngQy1: {
						required: "필수로 입력하세요."
					},
					ownerSe1 : {
						required: "필수로 입력하세요."
					},
					cprNm1 : {
						required: "필수로 입력하세요."
					},
					bizrno1 : {
						required: "필수로 입력하세요.",
						bizrnoCheck : "올바른 사업자 등록번호를 입력하세요."
					},
					carNo2 : {
						required: "필수로 입력하세요."
					},
					carTy2 : {
						required: "필수로 입력하세요."
					},
					carCl2 : {
						required: "필수로 입력하세요."
					},
					mxmmLdadngQy2: {
						required: "필수로 입력하세요."
					},
					ownerSe2 : {
						required: "필수로 입력하세요."
					},
					cprNm2 : {
						required: "필수로 입력하세요."
					},
					bizrno2 : {
						required: "필수로 입력하세요.",
						bizrnoCheck : "올바른 사업자 등록번호를 입력하세요."
					},
					carNo3 : {
						required: "필수로 입력하세요."
					},
					carTy3 : {
						required: "필수로 입력하세요."
					},
					carCl3 : {
						required: "필수로 입력하세요."
					},
					mxmmLdadngQy3: {
						required: "필수로 입력하세요."
					},
					ownerSe3 : {
						required: "필수로 입력하세요."
					},
					cprNm3 : {
						required: "필수로 입력하세요."
					},
					bizrno3 : {
						required: "필수로 입력하세요.",
						bizrnoCheck : "올바른 사업자 등록번호를 입력하세요."
					},
					carNo4 : {
						required: "필수로 입력하세요."
					},
					carTy4 : {
						required: "필수로 입력하세요."
					},
					carCl4 : {
						required: "필수로 입력하세요."
					},
					mxmmLdadngQy4: {
						required: "필수로 입력하세요."
					},
					ownerSe4 : {
						required: "필수로 입력하세요."
					},
					cprNm4 : {
						required: "필수로 입력하세요."
					},
					bizrno4 : {
						required: "필수로 입력하세요.",
						bizrnoCheck : "올바른 사업자 등록번호를 입력하세요."
					},
					carNo5 : {
						required: "필수로 입력하세요."
					},
					carTy5 : {
						required: "필수로 입력하세요."
					},
					carCl5 : {
						required: "필수로 입력하세요."
					},
					mxmmLdadngQy5: {
						required: "필수로 입력하세요."
					},
					ownerSe5 : {
						required: "필수로 입력하세요."
					},
					cprNm5 : {
						required: "필수로 입력하세요."
					},
					bizrno5 : {
						required: "필수로 입력하세요.",
						bizrnoCheck : "올바른 사업자 등록번호를 입력하세요."
					},
				}
			});
			$.validator.addMethod("passwordCk",  function( value, element ) {
				return this.optional(element) ||  /^.*(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&+=]).*$/.test(value);
			});	
			$.validator.addMethod("accountIdCheck",  function( value, element ) {
				return this.optional(element) || /(?=.*\d)(?=.*[a-z]).{4,20}/.test(value);
			});
			$.validator.addMethod("bizrnoCheck",  function( value, element ) {
				return this.optional(element) || checkBizID(value);
			});

		}else if($("#userType").val() == "STKRS_FCLTY_CHARGER"){
			$("#saveUserInfo").validate({
				//validation이 끝난 이후의 submit 직전 추가 작업할 부분
				submitHandler: function (form, event) {
					event.preventDefault(); //form 의 submit 을 막고 ajax 로 동작하기 위한 구문
					if ($("#checkCertifity").val() == "") {
						alert("중복확인 후 회원가입 할 수 있습니다.")
						$("#accountId").focus();
						return false;
					}
					if ($("#moblphonCertifity").val() == "") {
						alert("휴대폰 중복확인 후 회원가입 할 수 있습니다.")
						return false;
					}
				
					var formData = {}
				
					formData.accountId = $("#accountId").val();
					formData.accountTy = $("#userType").val();
					formData.email = $("#email").val();
					formData.name = $("#name").val();
					formData.passwd = $("#passwd").val();
					formData.sexdstn = $("input[name=sex]:checked").val();
					formData.moblphon = $("#moblphon").val();
					formData.status = $("#isUsable").val();
					/* 시설 관리자일 경우 */
					if($("#farmNo").val() != ""){
						formData.cmStkrsFcltyInfoM={
							farmNo : $("#farmNo").val(),
							rnAdres1 : $('input[name=rnAdres1]').val(),
							lmnAdres1 : $('input[name=lmnAdres1]').val(),
							adres2 : $('input[name=adres2]').val(),
							area : $('select[name=area]').val(),
							fcltyCode : $('input[name=fcltyCode]').val(),
							fcltyRegistde :  $('input[name=fcltyRegistde]').val(),
							hnf : "",	//인력
							nm : $('input[name=nm]').val(),
							ownerAdres1 : $('input[name=ownerAdres1]').val(),
							ownerAdres2 : $('input[name=ownerAdres2]').val(),
							ownerCttpc : $('input[name=ownerCttpc]').val(),
							ownerNm : $('input[name=ownerNm]').val(),
							ownerZip : $('input[name=ownerZip]').val(),
							registerId : $("#accountId").val(),
							rspnberAdres1 : $('input[name=rspnberAdres1]').val(),
							rspnberAdres2 : $('input[name=rspnberAdres2]').val(),
							rspnberCttpc : $('input[name=rspnberCttpc]').val(),
							rspnberNm : $('input[name=rspnberNm]').val(),
							rspnberZip : $('input[name=rspnberZip]').val(),
							status : $('select[name=status]').val(),
							ty : $('select[name=ty]').val(),
							userSelectedType  : $('input[name=userSelectedType]').val(),
							zip : $('input[name=zip]').val(),
						}
					}else{
						formData.cmStkrsFcltyInfoM={
							rnAdres1 : $('input[name=rnAdres1]').val(),
							lmnAdres1 : $('input[name=lmnAdres1]').val(),
							adres2 : $('input[name=adres2]').val(),
							area : $('select[name=area]').val(),
							fcltyCode : $('input[name=fcltyCode]').val(),
							fcltyRegistde :  $('input[name=fcltyRegistde]').val(),
							hnf : "",	//인력
							nm : $('input[name=nm]').val(),
							ownerAdres1 : $('input[name=ownerAdres1]').val(),
							ownerAdres2 : $('input[name=ownerAdres2]').val(),
							ownerCttpc : $('input[name=ownerCttpc]').val(),
							ownerNm : $('input[name=ownerNm]').val(),
							ownerZip : $('input[name=ownerZip]').val(),
							registerId : $("#accountId").val(),
							rspnberAdres1 : $('input[name=rspnberAdres1]').val(),
							rspnberAdres2 : $('input[name=rspnberAdres2]').val(),
							rspnberCttpc : $('input[name=rspnberCttpc]').val(),
							rspnberNm : $('input[name=rspnberNm]').val(),
							rspnberZip : $('input[name=rspnberZip]').val(),
							status : $('select[name=status]').val(),
							ty : $('select[name=ty]').val(),
							userSelectedType  : $('input[name=userSelectedType]').val(),
							zip : $('input[name=zip]').val(),
						}
					}
					console.log("formData", JSON.stringify(formData));
					if (confirm("회원 등록 하시겠습니까?")) {
						$.ajax({
							type: 'POST',
							url: global.apiUrl + "/members/join",
							async: false,
							data: JSON.stringify(formData),
							contentType: "application/json",
							dataType: 'json',
							success: function (res) {
								window.location.href="./usersList.html"
							},
							error: function (err) {
								alert("실패");
							}
						});
						return false;
					} else {
						return false;
					}
				},
				//규칙
				rules: {
					userType : {
						required: true
					},
					accountId : {
						required: true,
						accountIdCheck : true
					},
					passwd: {
						required: true,
						minlength: 8,
						maxlength: 20,
						passwordCk : true,
					},
					password_confirm: {
						required: true,
						minlength: 8,
						maxlength: 20,
						equalTo: "#passwd",
					},
					name: {
						required: true,
						//digits : true // 숫자만 입력
					},
					email: {
						required: true,
						minlength: 2,
						email: true
					},
					moblphon: {
						required: true,
						minlength: 11,
						maxlength: 20,
						number : true
					},
					/* 시설 필수 체크 */
					nm : {
						required: true,
						minlength: 2,
						maxlength: 20
					},
					area : {
						required: true,
					},
					rnAdres1 : {
						required: true
					},
					fcltyCode : {
						required: true,
						minlength: 1,
						maxlength: 20
					},
					fcltyRegistde : {
						required: true,
						minlength: 2,
						maxlength: 10,
						fcltyRegistdeChk : true
					},
					ty : {
						required: true
					},
					status : {
						required: true
					},
					ownerNm : {
						required: true,
						minlength: 2,
						maxlength: 20
					},
					ownerCttpc  :{
						required: true,
						minlength: 11,
						maxlength: 20,
						number : true
						//phoneChk : true
					},
					ownerAdres1 : {
						required: true,
						minlength: 2
					},
					rspnberNm  :{
						required: true,
						minlength: 2,
						maxlength: 20
					},
					rspnberCttpc : {
						required: true,
						minlength: 11,
						maxlength: 20,
						number : true
						//phoneChk : true
					},
					rspnberAdres1 : {
						required: true,
						minlength: 2
					},
					isUsable : {
						required : true
					}
				},
				//규칙체크 실패시 출력될 메시지
				messages: {
					userType : {
						required: "필수로 입력하세요"
					},
					accountId : {
						required: "필수로 입력하세요",
						accountIdCheck : "영문+숫자 조합(4자 이상 20자 이하로)작성해 주세요."
					},
					passwd: {
						required: "필수로 입력하세요",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다",
						passwordCk : "비밀번호는 영문자,숫자,특수문자 조합을 입력해야 합니다."
					},
					password_confirm: {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다",
						equalTo: "비밀번호가 일치하지 않습니다.",
					},
					name: {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
					},
					email: {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						email: "이메일 형식에 맞지 않습니다."
					},
					moblphon: {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다",
						number : "숫자만 입력하세요."
					},
					nm: {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다"
					},
					area: {
						required: "필수로 입력하세요."
					},
					rnAdres1: {
						required: "필수로 입력하세요."
					},
					fcltyCode: {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다"
					},
					fcltyRegistde : {
						required: "필수로 입력하세요",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다",
						fcltyRegistdeChk : "시설등록일은(2020.09.01)형식으로 작성해 주세요."
					},
					ty: {
						required: "필수로 입력하세요.",
					},
					status  :{
						required: "필수로 입력하세요."
					},
					ownerNm :{
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다"
					},
					ownerCttpc:{
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다",
						number : "숫자만 입력해 주세요"
						//phoneChk : "휴대폰은(010-1234-5678)형식으로 작성해 주세요"
					},
					ownerAdres1:{
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다"
					},
					rspnberNm : {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다"
					},
					rspnberCttpc : {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다",
						maxlength: "최대 {0}글자이하이어야 합니다",
						number : "숫자만 입력해 주세요"
						//phoneChk : "휴대폰은(010-1234-5678)형식으로 작성해 주세요"
					},
					rspnberAdres1 : {
						required: "필수로 입력하세요.",
						minlength: "최소 {0}글자이상이어야 합니다"
					},
					isUsable : {
						required: "필수로 입력하세요."
					}
				}
			});
			$.validator.addMethod("accountIdCheck",  function( value, element ) {
				return this.optional(element) || /(?=.*\d)(?=.*[a-z]).{4,20}/.test(value);
			});
			$.validator.addMethod("fcltyRegistdeChk",  function( value, element ) {
				return this.optional(element) ||   /[0-9]{4}.(0?[1-9]|1[012]).(0?[1-9]|[12][0-9]|3[01])/.test(value);
			});
			$.validator.addMethod("passwordCk",  function( value, element ) {
				return this.optional(element) ||  /^.*(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&+=]).*$/.test(value);
			});
		}else if($("#userType").val() == ""){
				$("#saveUserInfo").validate({
					//validation이 끝난 이후의 submit 직전 추가 작업할 부분
					//규칙
					rules: {
						userType : {
							required: true
						}
					},
					//규칙체크 실패시 출력될 메시지
					messages: {
						userType : {
							required: "필수로 입력하세요"
						}
					}
				});
				return false;
			}
	};
	
	/* 사업자 등록번호 유효성 검사 */
	function checkBizID(bizID) {
		// bizID는 숫자만 10자리로 해서 문자열로 넘긴다.
		var checkID = new Array(1, 3, 7, 1, 3, 7, 1, 3, 5, 1);
		var tmpBizID, i, chkSum=0, c2, remander;
		var result;
		bizID = bizID.replace(/-/gi,'');
		for (i=0; i<=7; i++) {
			chkSum += checkID[i] * bizID.charAt(i);
		}
		c2 = "0" + (checkID[8] * bizID.charAt(8));
		c2 = c2.substring(c2.length - 2, c2.length);
		chkSum += Math.floor(c2.charAt(0)) + Math.floor(c2.charAt(1));
		remander = (10 - (chkSum % 10)) % 10 ;
		if (Math.floor(bizID.charAt(9)) == remander) {
			result = true ; // OK!
		} else {
			result = false;
		}
		return result;
	}
	/* 차량번호 중복체크 */
	function carCheck(clickData) {
		event.preventDefault();
		let carNoId = $(clickData).prev()
		let checkId = $(clickData).next()
		//중복체크 iD 기준으로 초기화 시키기.
		$("#"+checkId[0].id).val("");
		if(carNoId[0].tagName == "LABEL"){
			carNoId = $(clickData).prev().prev();
		}
		if($("#"+carNoId[0].id).val() == ""){
			alert("차량번호를 입력하세요.")
			return false;
		}
		//차량번호 value 값 가지고 오기.
		let carValue = $("#"+carNoId[0].id).val();
		$.ajax({
			type: 'GET',
			url : global.apiUrl+"/cars/countBy?schColumns=carNo"+"&schKeywords="+carValue+"&columnTypes=STRING"+"&columnFormats="+"&comparisonOperators=EQ"+"&conditions=AND",
			async: false,
			contentType: "application/json",
			dataType: 'json',
			success: function (res) {
				if(res.page.totalElements ==0){
					$("#"+checkId[0].id).val("1");
					alert("사용 가능한 차량 번호 입니다.")
				}else{
					alert("중복된 차량 번호 입니다.")
					return false;
				}
			},
			error: function (res){
				console.log("error",res)
			}
		})
	}
	/* 차량 번호 change */
	function carNoChange(data){
		//input 차량번호 바꿀 시 초기화.
		let carNoCheck = $(data).next().next()
		if(carNoCheck[0].tagName == "BUTTON"){
			carNoCheck = $(data).next().next().next();
		}
		$("#"+carNoCheck[0].id).val("");
	}
	function carInfoShow(){
		$("#carInfoDeleteButton").show();
		let num = $("input[name='carNum']").length;
		if(num ==4){
			$("#carinfoButton").hide();
		}

		$("#car_div").append(
			'<div id=carTable'+(num+1)+ '>'+
			'<br>'+
				'<table>'+
				'<h4 class="tb-tit"><span class="icon-bullet"><img src="../assets/images/bullet1.png" alt="테이블 제목"></span>사용자 차량 정보'+(num+1)+'</h4>'+
					'<tbody>'+
						'<tr>'+
							'<th><span class="mark-essential">*</span>차량번호</th>'+
							'<td class="condition-input-box">'+
							'<div class="search-box">'+
								'<input type="text" id="carNo'+(num+1)+'" name="carNo'+(num+1)+'" placeholder="차량번호를 입력하세요." onchange="carNoChange(this);">'+
								'<button type="button" class="btn-td-search" onclick="carCheck(this);">중복확인</button>'+
								'<input type="hidden" id="carCertifity'+(num+1)+'">'+
								'<input type="hidden"  name="carNum">'+
							'</div>'+
							'</td>'+
							'<th><span class="mark-essential">*</span>차종명</th>'+
							'<td class="condition-input-box">'+
							'<input type="text" id="carTy'+(num+1)+'" name="carTy'+(num+1)+'" placeholder="차종명을 입력하세요.">'+
							'</td>'+
							'<th><span class="mark-essential">*</span>차량 유형</th>'+
							'<td class="condition-input-box">'+
								'<select id="carCl'+(num+1)+'" name="carCl'+(num+1)+'" class="">'+
									'<option value="" selected="">차량 분류</option>'+
									'<option value="LVSTCK_CNVYNC">가축 운반차량</option>'+
									'<option value="CDL_CNVYNC">원유 운반차량</option>'+
									'<option value="EGG_CNVYNC">알 운반차량</option>'+
									'<option value="ANIMAL_MEDCIN_CNVYNC">동물(의)약품 운반차량</option>'+
									'<option value="FEED_CNVYNC">사료 운반차량</option>'+
									'<option value="BIRD_FEED_CNVYNC">조사료 운반차량</option>'+
									'<option value="LVSTCK_EXCRS_CNVYNC">가축분뇨 운반차량</option>'+
									'<option value="RICE_CNVYNC">왕겨,쌀겨,톱밥운반차량</option>'+
									'<option value="CPT_CNVYNC">퇴비 운반차량</option>'+
									'<option value="CLNIC_VHCLE">진료 차량</option>'+
									'<option value="PREVNT_INOCL_VHCLE">예방접종 차량</option>'+
									'<option value="ARTIF_UPDT_VHCLE">인공수정 차량</option>'+
									'<option value="CNSL_VHCLE">컨설팅 차량</option>'+
									'<option value="FEED_PICK_VHCLE">사료채취 차량</option>'+
									'<option value="DSNFC_VHCLE">방역 차량</option>'+
									'<option value="MCHN_REPAIR_VHCLE">기계수리 차량</option>'+
									'<option value="DFWS_SHIPMNT_VHCLE">가금출하 차량</option>'+
									'<option value="DLVY_VHCLE">배송상하차 차량</option>'+
									'<option value="HNF_TRNSP_VHCLE">인력수송 차량</option>'+
									'<option value="GNRL_VHCLE">일반 차량</option>'+
									'<option value="STKRS_VHCLE">축산 차량</option>'+
									'<option value="ETC_VHCLE">기타 차량</option>'+
								'</select>'+
							'</td>'+
						'</tr>'+
						'<tr>'+
							'<th><span class="mark-essential">*</span>최대 적재량</th>'+
							'<td class="condition-input-box">'+
								'<div class="search-box">'+
									'<input type="text" id="mxmmLdadngQy'+(num+1)+'" name="mxmmLdadngQy'+(num+1)+'" placeholder="최대 적재량(톤)">'+
								'</div>'+
							'</td>'+
							'<th>소유자 구분</th>'+
							'<td class="condition-input-box">'+
								'<div class="text-box">'+
									'<select id="ownerSe'+(num+1)+'" name="ownerSe'+(num+1)+'">'+
										'<option value="INDVDL">개인</option>'+
										'<option value="INDVDL_BSNM">개인사업자</option>'+
										'<option value="CPR">법인</option>'+
										'<option value="ADMNSTMACH">행정기관</option>'+
										'<option value="PBLGRP">공공단체</option>'+
										'<option value="GNRL_GRP">일반단체</option>'+
										'<option value="FRGNR">외국인</option>'+
									'</select>'+
								'</div>'+
							'</td>'+
							'<th>법인명</th>'+
							'<td class="condition-input-box">'+
								'<div class="text-box">'+
									'<input type="text" id="cprNm'+(num+1)+'" name="cprNm'+(num+1)+'" placeholder="법인명">'+
								'</div>'+
							'</td>'+                            
						'</tr>'+
						'<tr>'+
							'<th>사업자 등록번호</th>'+
							'<td class="condition-input-box" colspan="5">'+
								'<div class="search-box">'+
									'<input type="text" id="bizrno'+(num+1)+'" name="bizrno'+(num+1)+'" placeholder="사업자등록번호">'+
								'</div>'+
							'</td>'+
						'</tr>'+
					'</tbody>'+
				'</table>'+
			'</div>'
		)
	}
	function carInfoDelete(){
		$("#carinfoButton").show();
		let num = $("input[name='carNum']").length;
		$("#carTable"+num).remove();

		if(num ==2){
			$("#carInfoDeleteButton").hide();
		}
	}

	//시설명 검색 
	function searchAccountPop() {
		var width = 800;
		var height = 500;
		var url = './usersFctSearch.html';
		$.smartPop.open({
		    width: width,
		    height: height,
	      isHeightFix : true,
		    url: url,
		    isScroll : 'yes'
		});
	}
	//시설 자동 등록 
	function setFclty(data) {
		console.log("fclty",data)
		$("#farmNo").val(data.farmNo)
		$('#nm').val(data.farmNm)
		$('#area').val(data.area)
		$('#rnAdres1').val(data.rnAdres1)
		$('#adres2').val(data.adres2)
		$('#lmnAdres1').val(data.lmnAdres1)
		$('#zip').val(data.zip)
		$('#userSelectedType').val(data.userSelectedType)
		$('#fcltyCode').val(data.fcltyCode)
		$('#fcltyRegistde').val(data.fcltyRegistde)
		$('#ty').val(data.ty)
		$('#status').val(data.status)
		$('#ownerNm').val(data.ownerNm)
		$('#ownerCttpc').val(data.ownerCttpc)
		$('#ownerAdres1').val(data.ownerAdres1)
		$('#ownerAdres2').val(data.ownerAdres2)
		$('#ownerZip').val(data.ownerZip)
		$('#rspnberNm').val(data.rspnberNm)
		$('#rspnberCttpc').val(data.rspnberCttpc)
		$('#rspnberAdres1').val(data.rspnberAdres1)
		$('#rspnberAdres2').val(data.rspnberAdres2)
		$('#rspnberZip').val(data.rspnberZip)
	}
	/* 소독시설 초기화 */
	function FcltyOnChange(){
		$("#farmNo").val("");
	}
</script>