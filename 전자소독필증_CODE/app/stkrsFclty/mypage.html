<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>거점소독시설</title>
	<link rel="stylesheet" href="../assets/css/common.css">
	<link rel="stylesheet" href="../assets/css/style.css">
	<script type="text/javascript" src="../assets/js/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="../assets/js/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../assets/js/custom.js"></script>
	<!-- 공통 js -->
	<script type="text/javascript" src="../../assets/js/comm.js"></script>
	<!-- 공통 모달 -->
	<script type="text/javascript" src="../../assets/js/confirmModal.js"></script>
	<!-- sessionChk -->
	<script type="text/javascript" src="../../assets/js/sessionChk.js"></script>
	<script type="text/javascript">
		let carInfo = [];
		let getlocalStorage = JSON.parse(localStorage.getItem('SignInAccount'));
		$(document).ready(function () {
			//session Check localStorage에 accountId 없을 경우 login Page로 이동
			sessionChk();
			console.log("getlocalStorage", getlocalStorage);

		})
		//회원 탈퇴
		function secsnUser(){
			makeConfirmModal("회원 탈퇴 하시겠습니까?","userinfoDelete()")
		}
		function userinfoDelete(){
			let formData = {
				accountId : getlocalStorage.accountId,
				accountTy : getlocalStorage.accountTy,
				status : "DELETE"
			}
			$.ajax({
				type: 'PUT',
				url: global.apiUrl + "/members/secsn",
				data: JSON.stringify(formData),
				contentType: "application/json",
				async: false,
				dataType: 'json',
				success: function (res) {
					modal_close();
					modalAlert("탈퇴 되었습니다.")
				},
				error: function (err) {
					alert("실패");
				},
			});
		}
		//로그 아웃
		function logOut(){
			makeConfirmModal("로그아웃 하시겠습니까?","logOutDirt()")
		}
		function logOutDirt(){
			window.location.href="../member/logout.html"	
		}
		function modalAlert_close(){
			window.location.href="../member/logout.html"
		}
	</script>
</head>
<body>
	<div class="join bg-gray" id="wrap">
		<!-- header -->
		<header class="user3">
			<div class="title-box">
				<h1>마이페이지</h1>
			</div>
		</header>
		<!-- //header -->
		<div class="container pd-yes">
			<div class="btn-wrap one pd-yes">
				<button type="submit" class="btn bg-blue lg btn-join" onclick="location.href='mypageUpdate.html'">개인정보 수정</button>
			</div>
			<div class="btn-wrap one pd-yes">
				<button type="submit" class="btn bg-blue lg btn-join" onclick="secsnUser();">회원 탈퇴</button>
			</div>
			<div class="btn-wrap one pd-yes">
				<button type="submit" class="btn bg-blue lg btn-join" onclick="logOut();">로그아웃</button>
			</div>
		</div>
	</div>
</body>